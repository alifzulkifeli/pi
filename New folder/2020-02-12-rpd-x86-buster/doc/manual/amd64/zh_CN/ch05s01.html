<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>5.1. 在 64-bit PC 上引导安装程序</title>
<link rel="stylesheet" type="text/css" href="install.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="index.html" title="Debian GNU/Linux 安装手册">
<link rel="up" href="ch05.html" title="第 5 章 用安装系统启动">
<link rel="prev" href="ch05.html" title="第 5 章 用安装系统启动">
<link rel="next" href="ch05s02.html" title="5.2. 辅助功能">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">5.1. 在 <span class="phrase">64-bit PC</span>
   
   
   
   
   
   
   
   
   
   
   
   
    上引导安装程序</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="ch05.html"><img src="images/prev.png" alt="上一页"></a> </td>
<th width="60%" align="center">第 5 章 用安装系统启动</th>
<td width="20%" align="right"> <a accesskey="n" href="ch05s02.html"><img src="images/next.png" alt="下一页"></a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title">
<a name="idm1032"></a>5.1. 在 <span class="phrase">64-bit PC</span>
   
   
   
   
   
   
   
   
   
   
   
   
    上引导安装程序</h2></div></div></div>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[警告]" src="images/warning.png"></td>
<th align="left">警告</th>
</tr>
<tr><td align="left" valign="top"><p>假如您的机器上有其他的操作系统，并希望保留 (多重启动设置)，您要确保它在启动安装程序<span class="emphasis"><em>之前</em></span>正确地被关闭。在另外一个操作系统休眠时 (中断并保存到磁盘) 进行安装，被中断的操作系统的状态信息可能会丢失或者损坏，再次启动将会出现问题。 </p></td></tr>
</table></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>关于如何启动图形安装程序，请参见<a class="xref" href="ch05s01.html#graphical" title="5.1.8. 图形安装程序">第 5.1.8 节 “图形安装程序”</a>。 </p></td></tr>
</table></div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="usb-boot-x86"></a>5.1.1. 从 U 盘启动</h3></div></div></div>
<p>如果您的计算机可以从 USB 启动，这可能是最简单的安装方法。假设您已经准备好了从 <span class="phrase"><a class="xref" href="ch03s06.html#boot-dev-select-x86" title="3.6.2. 选择引导设备">第 3.6.2 节 “选择引导设备”</a></span> 到 <a class="xref" href="ch04s03.html" title="4.3. 为从 U 盘引导准备文件">第 4.3 节 “为从 U 盘引导准备文件”</a> 的所有步骤，只需插入 U 盘到一个空的 USB 口并重启。除非您使用了灵活方式创建 U 盘并不激活，系统应该引导，并看到一个 <code class="prompt">boot:</code> 提示符。此时您可以输入一些引导选项，也可以直接按 <span class="keycap"><strong>Enter</strong></span>。 </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="idm1049"></a>5.1.2. 从 CD-ROM 启动</h3></div></div></div>
<p>如果您有此套件，并且如果您的机器支持直接 CD 引导，太棒了！只需要<span class="phrase">配置您的系统可以用 CD 启动，参见<a class="xref" href="ch03s06.html#boot-dev-select-x86" title="3.6.2. 选择引导设备">第 3.6.2 节 “选择引导设备”</a>，</span>插入您的 CD，重启，然后继续下一章。 </p>
<p>注意某些特定的 CD 驱动器需要一些特殊的驱动程序，因此他们可能在安装的早期不能被访问。如果从 CD 引导的标准方法不能用于您的硬件，阅读本章中关于其他种类的内核以及安装方法，它们有可能能解决问题。 </p>
<p>即便您不能从 CD-ROM 引导，依然可以安装 CD-ROM 上面的 Debian 系统组件和所有软件包。只要使用不同的媒介引导，当安装操作系统、基础系统和任意附加的软件包时，只需将安装系统指向 CD-ROM 驱动器即可。 </p>
<p>如果您遇到引导方面的问题，请参见<a class="xref" href="ch05s04.html" title="5.4. 安装过程中的故障修复">第 5.4 节 “安装过程中的故障修复”</a>。 </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="boot-win32"></a>5.1.3. 从 Windows 引导</h3></div></div></div>
<p>从 Windows 下启动安装程序，您可以 </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p>从<a class="xref" href="ch04s01.html" title="4.1. 官方的 Debian GNU/Linux CD/DVD 光盘套装">第 4.1 节 “官方的 Debian GNU/Linux CD/DVD 光盘套装”</a><span class="phrase">以及<a class="xref" href="ch04s03.html" title="4.3. 为从 U 盘引导准备文件">第 4.3 节 “为从 U 盘引导准备文件”</a></span>获取 CD-ROM/DVD-ROM<span class="phrase"> 或 U 盘</span>安装介质，或 </p></li>
<li class="listitem"><p>下载独立的 Windows 可执行程序，它位于 Debian 镜像网站 <a class="ulink" href="http://http.us.debian.org/debian/tools/win32-loader/stable/win32-loader.exe" target="_top">tools/win32-loader/stable/win32-loader.exe</a>。 </p></li>
</ul></div>
<p>

</p>
<p>假如您使用的是安装 CD 或 DVD，在插入盘片的时候，预安装程序会自动加载。如果 Windows 没有自动运行，或者您使用的是 USB 存储卡，您可以访问该设备手动执行 <span class="command"><strong>setup.exe</strong></span> 程序。 </p>
<p>程序运行后，会先询问一些预备问题，接着系统就准备重启进入 Debian GNU/Linux 安装程序。 </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="install-from-dos"></a>5.1.4. 从 DOS 下使用 loadlin 引导</h3></div></div></div>
<p>启动到 DOS（非 Windows）。例如，您可以从用于恢复或诊断的磁盘中启动。 </p>
<p>如果您可以使用安装 CD，请切换到 CD-ROM 驱动器，例如，</p>
<div class="informalexample"><pre class="screen">
d:
</pre></div>
<p>，或者确认您已依照<a class="xref" href="ch04s04.html#files-loadlin" title="4.4.2. Hard disk installer booting from DOS using loadlin">第 4.4.2 节 “Hard disk installer booting from DOS using <span class="command"><strong>loadlin</strong></span>”</a>指引准备好了硬盘, 然后切换到该磁盘。 </p>
<p>进入您选择的 flavor 子目录，如</p>
<div class="informalexample"><pre class="screen">
cd \install.<code class="filename">amd</code>
</pre></div>
<p>如果您希望使用图形安装程序，请进入 <code class="filename">gtk</code> 子目录。</p>
<div class="informalexample"><pre class="screen">
cd gtk
</pre></div>
<p>然后，执行 <span class="command"><strong>install.bat</strong></span>。内核将会加载并运行安装程序。 </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="boot-initrd"></a>5.1.5. 引导 Linux 使用 <span class="command"><strong>LILO</strong></span> 或 <span class="command"><strong>GRUB</strong></span>
</h3></div></div></div>
<p>为了从硬盘引导安装程序，您首先必须按照要求下载并且放置所需的文件，请参见<a class="xref" href="ch04s04.html" title="4.4. 为从硬盘引导准备文件">第 4.4 节 “为从硬盘引导准备文件”</a>。 </p>
<p>如果您只愿意使用硬盘引导，然后从网络下载其他文件，需要下载 <code class="filename">netboot/debian-installer/amd64/initrd.gz</code> 文件及其对应的内核 <code class="filename">netboot/debian-installer/amd64/linux</code>。这将允许您重新分区用于引导的硬盘，需要小心操作。 </p>
<p>另一种方法，可以在安装时保持原硬盘的分区不变，您需要下载 <code class="filename">hd-media/initrd.gz</code> 文件以及对应的内核，还需要一个 CD（或者 DVD） iso 文件的副本放在硬盘上（确认文件名是以 <code class="literal">.iso</code> 结尾的）。这样安装程序就可以从硬盘引导，并从 CD/DVD 映像文件上安装，而不使用网络。 </p>
<p>如果采用 <span class="command"><strong>LILO</strong></span>，您需要在 <code class="filename">/etc/lilo.conf</code> 中配置两件最基本的事情: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p> 在引导时装入 <code class="filename">initrd.gz</code> 安装程序；</p></li>
<li class="listitem"><p> 让 <code class="filename">vmlinuz</code> 内核使用一个内存虚拟磁盘作为它的根分区。</p></li>
</ul></div>
<p> 这里是一个 <code class="filename">/etc/lilo.conf</code> 的例子： </p>
<p>

</p>
<div class="informalexample"><pre class="screen">image=/boot/newinstall/vmlinuz
       label=newinstall
       initrd=/boot/newinstall/initrd.gz
</pre></div>
<p> 欲获知更多细节，请参见 <span class="citerefentry"><span class="refentrytitle">initrd</span>(4)</span> 和 <span class="citerefentry"><span class="refentrytitle">lilo.conf</span>(5)</span> man 手册。现在运行 <strong class="userinput"><code>lilo</code></strong> 并且重新启动。 </p>
<p>使用 <span class="command"><strong>GRUB1</strong></span> 的过程也类似。在 <code class="filename">/boot/grub/</code> 目录下找到 <code class="filename">menu.lst</code>（或者位于 <code class="filename">/boot/boot/grub/</code>），然后给安装程序增添一个入口，例如（假设 <code class="filename">/boot</code> 位于系统中第一个磁盘的第一个分区上面）： </p>
<div class="informalexample"><pre class="screen">title  New Install
root   (hd0,0)
kernel /boot/newinstall/vmlinuz
initrd /boot/newinstall/initrd.gz
</pre></div>
<p>

</p>
<p>使用 <span class="command"><strong>GRUB2</strong></span> 的过程类似。它使用 <code class="filename">grub.cfg</code> 替代 <code class="filename">menu.lst</code> 文件。安装程序的入口，例如: </p>
<div class="informalexample"><pre class="screen">menuentry 'New Install' {
insmod part_msdos
insmod ext2
set root='(hd0,msdos1)'
linux /boot/newinstall/vmlinuz
initrd /boot/newinstall/initrd.gz
}
</pre></div>
<p>

</p>
<p>从这里开始，下面采用 <span class="command"><strong>GRUB</strong></span> 或 <span class="command"><strong>LILO</strong></span> 将没有什么差别。 </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="boot-tftp-x86"></a>5.1.6. 用 TFTP 引导</h3></div></div></div>
<p>从网络引导需要网络连接和一台 TFTP 网络引导服务器 (也可能是 DHCP、RARP 或 BOOTP 服务器，以进行自动网络配置)。 </p>
<p>参见<a class="xref" href="ch04s05.html" title="4.5. 为使用 TFTP 网络引导准备文件">第 4.5 节 “为使用 TFTP 网络引导准备文件”</a>设置用于支持网络引导的服务器端。 </p>
<p>在 i386 体系上有很多方法用 TFTP 进行引导。 </p>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="idm1145"></a>5.1.6.1. 支持 PXE 的网卡或者主板</h4></div></div></div>
<p>您的网卡或者主板可能已经提供了 PXE 引导功能。它是 <span class="trademark">Intel</span>™ TFTP 引导的实现。如果是这样，您可以配置 BIOS 用网络进行引导。 </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="idm1149"></a>5.1.6.2. 网络 BootROM 的网卡</h4></div></div></div>
<p>您的网卡很有可能提供了 TFTP 引导功能。 </p>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="idm1152"></a>5.1.6.3. Etherboot</h4></div></div></div>
<p><a class="ulink" href="http://www.etherboot.org" target="_top">etherboot project</a> 提供了为 TFTP 引导所需要的引导软盘甚至是引导 ROMS。 </p>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="boot-screen"></a>5.1.7. 引导界面</h3></div></div></div>
<p>当安装程序启动时，您应该看到友好的图形屏幕，显示 Debian 标志和菜单： </p>
<div class="informalexample"><pre class="screen">Debian GNU/Linux 安装程序启动菜单

图形安装
安装
高级选项             &gt;
帮助
使用语音合成器进行安装
</pre></div>
<p>

</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>根据计算机的启动方式（BIOS 或 UEFI）不同，此图形屏幕将看起来略有不同，但会显示相同的选项。 </p></td></tr>
</table></div>
<p>根据您使用的安装方法，<span class="quote">“<span class="quote">图形安装</span>”</span>选项可能不可用。另外，双架构映像在每个安装选项下方还会显示它的 64 位变体，因此选项数量几乎会翻倍。 </p>
<p>普通安装时，选择<span class="quote">“<span class="quote">图形安装</span>”</span>或<span class="quote">“<span class="quote">安装</span>”</span>入口 — 可以使用键盘方向键或者键入（高亮的）首字母，然后按下 <span class="keycap"><strong>Enter</strong></span> 引导安装程序。默认情况下，<span class="quote">“<span class="quote">图形安装</span>”</span>入口已经选中。 </p>
<p><span class="quote">“<span class="quote">高级选项</span>”</span>用于访问第二层菜单，引导安装程序进入专家模式、救援模式和自动安装。 </p>
<p>If you wish or need to add any boot parameters for either the installer or the kernel, press <span class="keycap"><strong>Tab</strong></span> (BIOS boot), or <span class="keycap"><strong>e</strong></span> then <span class="keycap"><strong>down arrow</strong></span> three times then <span class="keycap"><strong>end</strong></span> (UEFI boot). This will bring the boot command for the selected menu entry and allow you to edit it to suit your needs. Note that the keyboard layout at this point is still QWERTY. The help screens (see below) list some common possible options. Press <span class="keycap"><strong>Enter</strong></span> (BIOS boot) or <span class="keycap"><strong>F10</strong></span> (UEFI boot) to boot the installer with your options; pressing <span class="keycap"><strong>Esc</strong></span> will return you to the boot menu and undo any changes you made. </p>
<p>选择 <span class="quote">“<span class="quote">Help</span>”</span> 项将进入第一个帮助界面，显示可用的帮助界面概要。当出现帮助界面后要返回引导菜单，需要在引导提示符后输入 'menu' 并按 <span class="keycap"><strong>Enter</strong></span>。所有的帮助界面在引导命令可以输入的地方都有一个引导提示：</p>
<div class="informalexample"><pre class="screen">
Press F1 for the help index, or ENTER to boot:
</pre></div>
<p> 在这个引导提示的地方您可以按下 <span class="keycap"><strong>Enter</strong></span> 使用默认的选项引导安装程序，或者输入指定的引导命令以及引导参数。一些可用的引导参数可能会在多个帮助界面看到。假如您要添加任何参数到引导命令行，确保首先输入的是引导方法（默认为 <strong class="userinput"><code>install</code></strong>)，然后在第一个参数前要有空格(例如：<strong class="userinput"><code>install fb=false</code></strong>）。 </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>此时键盘假设使用的是默认美式英文布局。这意味着如果您的键盘使用不同的（特定语言的）布局，显示在屏幕上的字符可能与您键入参数时希望的不同。维基百科里面有一个 <a class="ulink" href="https://en.wikipedia.org/wiki/Keyboard_layout#United_States" target="_top">schema of the US keyboard layout</a> 条目说明了如何找到要使用正确的键。 </p></td></tr>
</table></div>
<p>
</p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top">
<p>如果您使用 BIOS 配置为串口控制台的系统，可能在启动安装程序的时候无法看到起始图形界面；甚至无法看到引导菜单。这种情况同样会发生在您使用远程管理设备安装系统，并且这些设备提供了字符界面到 VGA 控制台的情况下。比如 Compaq 的 <span class="quote">“<span class="quote">integrated Lights Out</span>”</span> (iLO) 和 HP 的 <span class="quote">“<span class="quote">Integrated Remote Assistant</span>”</span> (IRA)。 </p>
<p>要跳过图形引导界面，您可以在没有任何显示时按下 <span class="keycap"><strong>Esc</strong></span> 得到字符引导提示符，或者(同样没有任何显示)按下 <span class="keycap"><strong>Enter</strong></span> 和 <span class="quote">“<span class="quote">H</span>”</span> 选择上面描述的 <span class="quote">“<span class="quote">Help</span>”</span> 选项。以后输入就会在提示符后面显示。要防止余下的安装仍使用 framebuffer，您还需要在启动提示后添加 <strong class="userinput"><code>vga=normal fb=false</code></strong>，这在帮助里面有说明。 </p>
</td></tr>
</table></div>
<p>
</p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="graphical"></a>5.1.8. 图形安装程序</h3></div></div></div>
<p>安装程序的图形版本仅适用于有限数量的架构，包括 <span class="phrase">64-bit PC</span>
   
   
   
   
   
   
   
   
   
   
   
   
   。图形安装程序的功能几乎与基于文本的安装程序功能相同，因为它基本使用相同的程序，只是前端不同。 </p>
<p>虽然功能相同，图形安装程序仍然有一些显著优势。主要优点在于它支持更多的语言，即可以使用在基于文本的 <span class="quote">“<span class="quote">newt</span>”</span> 前端上无法显示的字符集的语言。它还具有一些可用性上的优点，例如可以使用鼠标，在某些情况下还可以在单个屏幕上显示多个问题。 </p>
<p>图形安装程序可用于所有的 CD 映像，及hd-media安装方法。要启动图形安装程序，只需从引导菜单中选择相关选项即可。可以从<span class="quote">“<span class="quote">高级选项</span>”</span>菜单中选择图形安装程序的专家和救援模式。以前使用的引导方法 <strong class="userinput"><code>installgui</code></strong>、<strong class="userinput"><code>expertgui</code></strong> 和 <strong class="userinput"><code> rescuegui</code></strong> 仍然可以从引导提示符中使用，在选择<span class="quote">“<span class="quote">帮助</span>”</span>选项后。 </p>
<p>还有一个可用于网络启动的图形安装程序映像。还有一个特殊的<span class="quote">“<span class="quote">迷你</span>”</span> ISO 映像<a href="#ftn.gtk-miniiso-x86" class="footnote" name="gtk-miniiso-x86"><sup class="footnote">[5]</sup></a>，它主要用于测试。 </p>
<p>与基于文本的安装程序一样，启动图形安装程序时可以添加引导参数。 </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top">
<p>与基于文本的安装程序相比，图形安装程序需要更多的内存才能运行：800MB。如果内存不足，它将自动返回到基于文本的 <span class="quote">“<span class="quote">newt</span>”</span> 前端。 </p>
<p>如果系统中的内存量低于 550MB，图形安装程序可能无法启动，而基于文本的安装程序可能仍可以工作。对于可用内存很小的系统，建议使用基于文本的安装程序。 </p>
</td></tr>
</table></div>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div id="ftn.gtk-miniiso-x86" class="footnote"><p><a href="#gtk-miniiso-x86" class="para"><sup class="para">[5] </sup></a> 可以从 Debian 镜像下载迷你 ISO 映像，述于<a class="xref" href="ch04s02.html" title="4.2. 从 Debian 镜像服务器下载文件">第 4.2 节 “从 Debian 镜像服务器下载文件”</a>。其位于 <code class="filename">netboot/gtk/mini.iso</code>。</p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="ch05.html"><img src="images/prev.png" alt="上一页"></a> </td>
<td width="20%" align="center"><a accesskey="u" href="ch05.html"><img src="images/up.png" alt="上一级"></a></td>
<td width="40%" align="right"> <a accesskey="n" href="ch05s02.html"><img src="images/next.png" alt="下一页"></a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">第 5 章 用安装系统启动 </td>
<td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="起始页"></a></td>
<td width="40%" align="right" valign="top"> 5.2. 辅助功能</td>
</tr>
</table>
</div>
</body>
</html>
