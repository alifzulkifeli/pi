<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>B.4. Contenidos del fichero de preconfiguración (para buster)</title>
<link rel="stylesheet" type="text/css" href="install.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<link rel="home" href="index.html" title="Guía de instalación de Debian GNU/Linux">
<link rel="up" href="apb.html" title="Apéndice B. Instalar automáticamente utilizando preconfiguración">
<link rel="prev" href="apbs03.html" title="B.3. Crear un fichero de preconfiguración">
<link rel="next" href="apbs05.html" title="B.5. Opciones avanzadas">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">B.4. Contenidos del fichero de preconfiguración (para buster)</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="apbs03.html"><img src="images/prev.png" alt="Anterior"></a> </td>
<th width="60%" align="center">Apéndice B. Instalar automáticamente utilizando preconfiguración</th>
<td width="20%" align="right"> <a accesskey="n" href="apbs05.html"><img src="images/next.png" alt="Siguiente"></a>
</td>
</tr>
</table>
<hr>
</div>
<div class="sect1">
<div class="titlepage"><div><div><h2 class="title">
<a name="preseed-contents"></a>B.4. Contenidos del fichero de preconfiguración (para buster)</h2></div></div></div>
<p>Los fragmentos de configuración que se utilizan en este apéndice están también disponibles como un fichero de preconfiguración de ejemplo en <span class="phrase"><a class="ulink" href="../example-preseed.txt" target="_top">../example-preseed.txt</a></span>. </p>
<p>Tenga en cuenta que este ejemplo está basado en una instalación para la arquitectura Intel x86. Si está instalando en otra arquitectura no serán relevantes algunos de los ejemplos (como la selección de teclado o la instalación del cargador) y tendrá que reemplazarlos por los valores de debconf más apropiados a su arquitectura. </p>
<p>Para más detalles sobre el funcionamiento de los componentes del instalador de Debian, consulte <a class="xref" href="ch06s03.html" title="6.3. Uso de componentes individuales">Sección 6.3, “Uso de componentes individuales”</a>. </p>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-l10n"></a>B.4.1. Localización</h3></div></div></div>
<p>During a normal install the questions about localization are asked first, so these values can only be preseeded via the initrd or kernel boot parameter methods. Auto mode (<a class="xref" href="apbs02.html#preseed-auto" title="B.2.3. Modo «auto»">Sección B.2.3, “Modo «auto»”</a>) includes the setting of <code class="literal">auto-install/enable=true</code> (normally via the <code class="literal">auto</code> preseed alias). This delays the asking of the localisation questions, so that they can be preseeded by any method. </p>
<p>Definir la configuración regional («locale») se puede utilizar para especificar tanto el idioma como el país y puede usarse cualquier combinación de idioma y país reconocido permitidos por <code class="classname">debian-installer</code>. Si la combinación no constituye una configuración regional válida, el instalador seleccionará automáticamente una válida para el idioma seleccionado. Puede utilizar <strong class="userinput"><code>locale=<em class="replaceable"><code>es_ES</code></em></code></strong>. para especificar la localización como un parámetro de arranque. </p>
<p>Aunque este método es muy fácil de usar, no permite la preconfiguración de todas las combinaciones posibles de idioma, país y configuración regional («locale»)<a href="#ftn.idm3647" class="footnote" name="idm3647"><sup class="footnote">[23]</sup></a>. Así que, de forma alternativa, puede preconfigurar los valores individualmente. El país y el idioma también se pueden definir como parámetros de arranque. </p>
<div class="informalexample"><pre class="screen"># Configuración de localización para el idioma, país y «locale».
d-i debian-installer/locale string es_ES

# Puede preconfigurar los valores de forma individual para una mayor flexiblidad.
#d-i debian-installer/language string en
#d-i debian-installer/country string NL
#d-i debian-installer/locale string en_GB.UTF-8
# Opcionalmente, especifique las «locales» adicionales a generar.
#d-i localechooser/supported-locales multiselect en_US.UTF-8, nl_NL.UTF-8
</pre></div>
<p>

</p>
<p>La configuración del teclado consiste en seleccionar un mapa de teclado y para (para mapas de teclado no latinos) un interruptor de conmutación para cambiar entre el mapa de teclado no latino y el mapa de teclado para Norteamérica. Durante la instalación, solo están disponibles los mapas de teclado básicos. Las variantes más avanzadas solo están disponibles en un sistema instalado, mediante la orden <span class="command"><strong>dpkg-reconfigure keyboard-configuration</strong></span>. </p>
<div class="informalexample"><pre class="screen"># Selección de teclado.
d-i keyboard-configuration/xkb-keymap select es
# d-i keyboard-configuration/toggle select No toggling
</pre></div>
<p>

</p>
<p>Para omitir la configuración del teclado preconfigure <code class="classname">keymap</code> con <strong class="userinput"><code>skip-config</code></strong>. Esto hará que el mapa de teclado del núcleo permanezca activo. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-network"></a>B.4.2. Configuración de red</h3></div></div></div>
<p>Por supuesto, la preconfiguración de la tarjeta de red no funcionará si está obteniendo el fichero de preconfiguración desde la red. Pero esta opción es muy cómoda cuando está arrancando desde un CD o memoria USB. Si carga ficheros de preconfiguración desde la red, puede introducir los parámetros de configuración de la red a través de parámetros de arranque del núcleo. </p>
<p>Use un parámetro de arranque similar a <strong class="userinput"><code>interface=<em class="replaceable"><code>eth1</code></em></code></strong> si tiene que escoger una interfaz particular durante el arranque vía red antes de cargar el fichero de preconfiguración de la red. </p>
<p>Aunque generalmente no es posible preconfigurar la red cuando se hace la preconfiguración via red (usando <span class="quote">“<span class="quote">preseed/url</span>”</span>), puede utilizar este truco para evitar esto si, por ejemplo, quiere configurar una dirección estática para la interfaz de red. El truco es obligar a que la configuración de red se ejecute de nuevo después de haber cargado el fichero de preconfiguración creando un script <span class="quote">“<span class="quote">preseed/run</span>”</span> con las siguientes órdenes: </p>
<div class="informalexample"><pre class="screen">kill-all-dhcp; netcfg
</pre></div>
<p>

</p>
<p>Las siguientes variables de debconf son relevantes para la configuración de la red. </p>
<div class="informalexample"><pre class="screen"># Deshabilitar completamente la configuración de red. Es útil para
# instalaciones desde cdrom o dispositivos que no están en red, para
# los cuales las preguntas y advertencias de red así como los tiempos
# de espera serían molestos.
#d-i netcfg/enable boolean false

# netcfg escogerá la interfaz que tiene enlace si puede. Esto hace que no
# muestre la lista si hay más de uno.
d-i netcfg/choose_interface select auto

# Escoger una interfaz específica en lugar de la encontrada:
#d-i netcfg/choose_interface select eth1

# Para definir  un tiempo de espera de detección de enlace distinto (por
# omisión, 3 segundos).
# Los valores se interpretan como segundos.
#d-i netcfg/link_wait_timeout string 10

# Si tiene un servidor de DHCP lento y el instalador expira intentando
# conectarse a él, esto puede serle útil.
#d-i netcfg/dhcp_timeout string 60
#d-i netcfg/dhcpv6_timeout string 60

# Si prefiere configurar la red de forma manual, descomente esta línea
# y la configuración de red estática más abajo.
#d-i netcfg/disable_autoconfig boolean true

# Si quiere que el fichero de preconfiguración funcione tanto en
# sistemas con un servidor de DHCP como en los que no lo tienen, tendrá
# que descomentar estas líneas y añadir la configuración estática de red
# a continuación.
#d-i netcfg/dhcp_failed note
#d-i netcfg/dhcp_options select Configure network manually

# Configuración estática de red
#
#Ejemplo IPv4
#d-i netcfg/get_ipaddress string 192.168.1.42
#d-i netcfg/get_netmask string 255.255.255.0
#d-i netcfg/get_gateway string 192.168.1.1
#d-i netcfg/get_nameservers string 192.168.1.1
#d-i netcfg/confirm_static boolean true
#
# Ejemplo IPv6
#d-i netcfg/get_ipaddress string fc00::2
#d-i netcfg/get_netmask string ffff:ffff:ffff:ffff::
#d-i netcfg/get_gateway string fc00::1
#d-i netcfg/get_nameservers string fc00::1
#d-i netcfg/confirm_static boolean true

# Cualquier nombre de host y de dominio que se obtengan por DHCP se utilizan
# antes que los valores aquí definidos. Por otra parte, definir los valores
# impide que se muestren las preguntas, incluso si los valores provienen
# de DHCP.
d-i netcfg/get_hostname string unassigned-hostname
d-i netcfg/get_domain string unassigned-domain

# Si desea forzar un nombre de host, sin importar lo que devuelve el
# el servidor DHCP, o cual es la entrada DNS inverso para el IP, descomente
# y ajuste la siguiente línea.
#d-i netcfg/hostname string somehost

# Desactivar el molesto diálogo de clave WEP.
d-i netcfg/wireless_wep string
# El nombre de servidor raro que algunos ISP utilizan como una especie de
# contraseña
#d-i netcfg/dhcp_hostname string radish

# Si se requiere firmware no libre para la red o para otro dispositivo,
# puede configurar el instalador para que siempre intente cargarlo, sin
# preguntar. O cambiar a falso para inhibir la pregunta.
#d-i hw-detect/load_firmware boolean true
</pre></div>
<p>Tenga en cuenta que <span class="command"><strong>netcfg</strong></span> determinará automáticamente la máscara de red si no se preconfigura <code class="classname">netcfg/get_netmask</code>. En tal caso, la variable tiene que marcarse como <code class="literal">seen</code> en el caso de las instalaciones automáticas. De la misma forma, <span class="command"><strong>netcfg</strong></span> elegirá una dirección apropiada si <code class="classname">netcfg/get_gateway</code> no ha sido establecida. La excepción es definir <code class="classname">netcfg/get_gateway</code> como <span class="quote">“<span class="quote">none</span>”</span> para especificar que no se debería usar puerta de enlace alguna. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-network-console"></a>B.4.3. Consola de red</h3></div></div></div>
<div class="informalexample"><pre class="screen"># Use los siguientes parámetros si desea hacer uso del componente
# network-console (consola de red) para instalaciones remotas vía SSH. 
# Sólo tiene sentido si desea hacer el resto de la instalación
# manualmente
#d-i anna/choose_modules string network-console
#d-i network-console/authorized_keys_url string http://10.0.0.1/openssh-key
#d-i network-console/password password r00tme
#d-i network-console/password-again password r00tme
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-mirror"></a>B.4.4. Configuración de la réplica</h3></div></div></div>
<p>Dependiendo del método de instalación que utilice se utilizará una réplica tanto para descargar componentes adicionales del instalador como para instalar el sistema base y para configurar <code class="filename">/etc/apt/sources.list</code> en el sistema instalado. </p>
<p>El parámetro <code class="classname">mirror/suite</code> determina la publicación que utiliza el sistema instalado. </p>
<p>El parámetro <code class="classname">mirror/udeb/suite</code> determina la publicación de los componentes adicionales del instalador. Sólo es necesario establecer este valor si se llegan a descargar componentes a través de la red y debería coincidir con el valor que se utilizó para construir la imagen de arranque «initrd» para el método de instalación utilizado. Habitualmente, el instalador usará automáticamente el valor adecuado y no debería existir la necesidad de configurar esto. </p>
<div class="informalexample"><pre class="screen"># No tiene que definir la cadena mirror/country si selecciona ftp
#d-i mirror/protocol string ftp
d-i mirror/country string manual
d-i mirror/http/hostname string ftp.es.debian.org
d-i mirror/http/directory string /debian
d-i mirror/http/proxy string

# Publicación a instalar.
#d-i mirror/suite string testing
# Publicación a utilizar para descargar componentes de la instalación
# (opcional)
#d-i mirror/udeb/suite string testing
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-account"></a>B.4.5. Configuración de cuentas de usuario</h3></div></div></div>
<p>The password for the root account and name and password for a first regular user's account can be preseeded. For the passwords you can use either clear text values or crypt(3) <span class="emphasis"><em>hashes</em></span>. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="images/warning.png"></td>
<th align="left">Aviso</th>
</tr>
<tr><td align="left" valign="top"><p>Be aware that preseeding passwords is not completely secure as everyone with access to the preconfiguration file will have the knowledge of these passwords. Storing hashed passwords is considered secure unless a weak hashing algorithm like DES or MD5 is used which allow for bruteforce attacks. Recommended password hashing algorithms are SHA-256 and SHA512. </p></td></tr>
</table></div>
<div class="informalexample"><pre class="screen"># Skip creation of a root account (normal user account will be able to
# use sudo).
#d-i passwd/root-login boolean false
# Alternatively, to skip creation of a normal user account.
#d-i passwd/make-user boolean false

# Root password, either in clear text
#d-i passwd/root-password password r00tme
#d-i passwd/root-password-again password r00tme
# or encrypted using a crypt(3)  hash.
#d-i passwd/root-password-crypted password [crypt(3) hash]

# To create a normal user account.
#d-i passwd/user-fullname string Debian User
#d-i passwd/username string debian
# Normal user's password, either in clear text
#d-i passwd/user-password password insecure
#d-i passwd/user-password-again password insecure
# or encrypted using a crypt(3) hash.
#d-i passwd/user-password-crypted password [crypt(3) hash]
# Create the first user with the specified UID instead of the default.
#d-i passwd/user-uid string 1010

# The user account will be added to some standard initial groups. To
# override that, use this.
#d-i passwd/user-default-groups string audio cdrom video
</pre></div>
<p>También se pueden preconfigurar las variables <code class="classname">passwd/root-password-crypted</code> y <code class="classname">passwd/user-password-crypted</code> utilizando como valor <span class="quote">“<span class="quote">!</span>”</span>. Si hace esto para cualquiera de las dos cuentas ésta se deshabilitará. Esto puede ser de ayuda para el caso de la cuenta de superusuario, siempre que tenga un mecanismo alternativo para poder llevar a cabo tareas de administración o acceder como superusuario (como por ejemplo, la utilización de autenticación mediante clave SSH o <span class="command"><strong>sudo</strong></span>). </p>
<p>The following command (available from the <code class="classname">whois</code> package) can be used to generate a SHA-512 based crypt(3) hash for a password: </p>
<div class="informalexample"><pre class="screen">mkpasswd -m sha-512
</pre></div>
<p>

</p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-time"></a>B.4.6. Configuración del reloj y zona horaria</h3></div></div></div>
<div class="informalexample"><pre class="screen"># Controla si el reloj del sistema debe establecerse a UTC.
d-i clock-setup/utc boolean true

# Puede establecer esto a cualquier valor válido para $TZ;
# consulte los contenidos de /usr/share/zoneinfo/ para hallar
# valores válidos.
d-i time/zone string US/Eastern

# Controla si se usará NTP para establecer el reloj durante la
# instalación
d-i clock-setup/ntp boolean true
# Servidores NTP a usar. El predeterminado es casi siempre
# el mejor.
#d-i clock-setup/ntp-server string ntp.example.com
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-partman"></a>B.4.7. Particionado</h3></div></div></div>
<p>La utilización de la preconfiguración para particionar el disco duro está limitada a lo que <code class="classname">partman-auto</code> puede permitir. Puede elegir o bien particionar el espacio libre en el disco o todo el disco. La distribución del disco puede basarse en una receta existente o utilizar una receta de un fichero o una receta incluida en el fichero de preconfiguración. Actualmente no es posible utilizar la preconfiguración para particionar más de un disco. </p>
<p>Es posible preconfigurar un particionado usando RAID, LVM y cifrado, pero no con toda la flexibilidad ofrecida al realizar una instalación sin preconfiguración. </p>
<p>Los ejemplos a continuación sólo ofrecen información básica sobre el uso de recetas. Para una información detallada consulte los ficheros <code class="filename">partman-auto-recipe.txt</code> y <code class="filename">partman-auto-raid-recipe.txt</code>, incluidos en el paquete <code class="classname">debian-installer</code>. Ambos ficheros también están disponibles desde el <a class="ulink" href="https://salsa.debian.org/installer-team/debian-installer/tree/master/doc/devel" target="_top">repositorio de fuentes de <code class="classname">debian-installer</code></a>. Tenga en cuenta que la funcionalidad permitida puede variar entre diferentes publicaciones. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="images/warning.png"></td>
<th align="left">Aviso</th>
</tr>
<tr><td align="left" valign="top"><p>La identificación de los discos depende del orden en el que se cargaron las unidades. Asegúrese de utilizar el disco correcto antes de configurarlo si el sistema tiene más de un disco. </p></td></tr>
</table></div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="preseed-partman-example"></a>B.4.7.1. Ejemplo de particionado</h4></div></div></div>
<div class="informalexample"><pre class="screen"># If the system has free space you can choose to only partition that space.
# This is only honoured if partman-auto/method (below) is not set.
#d-i partman-auto/init_automatically_partition select biggest_free

# Alternatively, you may specify a disk to partition. If the system has only
# one disk the installer will default to using that, but otherwise the device
# name must be given in traditional, non-devfs format (so e.g. /dev/sda
# and not e.g. /dev/discs/disc0/disc).
# For example, to use the first SCSI/SATA hard disk:
#d-i partman-auto/disk string /dev/sda
# In addition, you'll need to specify the method to use.
# The presently available methods are:
# - regular: use the usual partition types for your architecture
# - lvm:     use LVM to partition the disk
# - crypto:  use LVM within an encrypted partition
d-i partman-auto/method string lvm

# You can define the amount of space that will be used for the LVM volume
# group. It can either be a size with its unit (eg. 20 GB), a percentage of
# free space or the 'max' keyword.
d-i partman-auto-lvm/guided_size string max

# If one of the disks that are going to be automatically partitioned
# contains an old LVM configuration, the user will normally receive a
# warning. This can be preseeded away...
d-i partman-lvm/device_remove_lvm boolean true
# The same applies to pre-existing software RAID array:
d-i partman-md/device_remove_md boolean true
# And the same goes for the confirmation to write the lvm partitions.
d-i partman-lvm/confirm boolean true
d-i partman-lvm/confirm_nooverwrite boolean true

# You can choose one of the three predefined partitioning recipes:
# - atomic: all files in one partition
# - home:   separate /home partition
# - multi:  separate /home, /var, and /tmp partitions
d-i partman-auto/choose_recipe select atomic

# Or provide a recipe of your own...
# If you have a way to get a recipe file into the d-i environment, you can
# just point at it.
#d-i partman-auto/expert_recipe_file string /hd-media/recipe

# If not, you can put an entire recipe into the preconfiguration file in one
# (logical) line. This example creates a small /boot partition, suitable
# swap, and uses the rest of the space for the root partition:
#d-i partman-auto/expert_recipe string                         \
#      boot-root ::                                            \
#              40 50 100 ext3                                  \
#                      $primary{ } $bootable{ }                \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ /boot }                     \
#              .                                               \
#              500 10000 1000000000 ext3                       \
#                      method{ format } format{ }              \
#                      use_filesystem{ } filesystem{ ext3 }    \
#                      mountpoint{ / }                         \
#              .                                               \
#              64 512 300% linux-swap                          \
#                      method{ swap } format{ }                \
#              .

# The full recipe format is documented in the file partman-auto-recipe.txt
# included in the 'debian-installer' package or available from D-I source
# repository. This also documents how to specify settings such as file
# system labels, volume group names and which physical devices to include
# in a volume group.

# This makes partman automatically partition without confirmation, provided
# that you told it what to do using one of the methods above.
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true

# When disk encryption is enabled, skip wiping the partitions beforehand.
#d-i partman-auto-crypto/erase_disks boolean false
</pre></div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="preseed-partman-raid"></a>B.4.7.2. Particionar usando RAID</h4></div></div></div>
<p>También puede utilizar la preconfiguración para configurar las particiones en arreglos RAID por software. Se puede utilizar para niveles RAID 0, 1 y 5, 6 y 10 creando arreglos degradados y especificando dispositivos libres.  </p>
<p>Puede configurar grub para que se instale en todos los dispositivos utilizados en el arreglo si está utilizando RAID 1, consulte <a class="xref" href="apbs04.html#preseed-bootloader" title="B.4.11. Instalación del cargador de arranque">Sección B.4.11, “Instalación del cargador de arranque”</a>. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="images/warning.png"></td>
<th align="left">Aviso</th>
</tr>
<tr><td align="left" valign="top"><p>Es fácil equivocarse en este tipo de particionado automático. También es una funcionalidad que es poco probada por los desarrolladores del <code class="classname">debian-installer</code>. El usuario es responsable de aplicar bien las posibles recetas (de forma que tengan sentido y no entren en conflicto). Si tiene problemas compruebe <code class="filename">/var/log/syslog</code>. </p></td></tr>
</table></div>
<div class="informalexample"><pre class="screen"># AVISO: esta opción es de calidad beta y debería utilizarse con
# cuidado.

# Debería definirse el como «raid».
#d-i partman-auto/method string raid
# Especificar los discos a particionar. Deberían tener la misma
# distribución por lo que esto sólo funcionará si los discos son del
# mismo tamaño.
#d-i partman-auto/disk string /dev/sda /dev/sdb

# A continuación, tiene que especificar las particiones físicas que se
# utilizarán.
#d-i partman-auto/expert_recipe string \
#      multiraid ::                                         \
#              1000 5000 4000 raid                          \
#                      $primary{ } method{ raid }           \
#              .                                            \
#              64 512 300% raid                             \
#                      method{ raid }                       \
#              .                                            \
#              500 10000 1000000000 raid                    \
#                      method{ raid }                       \
#              .

# Por último, tiene que especificar cómo van a utilizarse las
# particiones antes definidas en la configuración RAID. Recuerde que
# tiene que utilizar los números de partición correctos para las
# particiones lógicas. Se permiten los níveles RAID 0, 1, 5, 6 y 10:
# los dispositivos se separan mediante «#».
# Los parámetros son
# &lt;raidtype&gt; &lt;devcount&gt; &lt;sparecount&gt; &lt;fstype&gt; &lt;mountpoint&gt; \
#          &lt;devices&gt; &lt;sparedevices&gt;
# Se soportan los niveles RAID 0, 1 y 5,6 y 10; los dispositivos se separan
# con "#"
#d-i partman-auto-raid/recipe string \
#    1 2 0 ext3 /                    \
#          /dev/sda1#/dev/sdb1       \
#    .                               \
#    1 2 0 swap -                    \
#          /dev/sda5#/dev/sdb5       \
#    .                               \
#    0 2 0 ext3 /home                \
#          /dev/sda6#/dev/sdb6       \
#    .

# Para información adicional, consulte el fichero «partman-auto-raid-recipe.txt»
# incluido en el paquete debian-installer, o a través del repositorio de fuentes
# del instalador de Debian.

# Esto hace que partman particione de forma automática sin
# confirmación.
d-i partman-md/confirm boolean true
d-i partman-partitioning/confirm_write_new_label boolean true
d-i partman/choose_partition select finish
d-i partman/confirm boolean true
d-i partman/confirm_nooverwrite boolean true
</pre></div>
</div>
<div class="sect3">
<div class="titlepage"><div><div><h4 class="title">
<a name="preseed-partman-mount-styles"></a>B.4.7.3. Controlar como se montan las particiones</h4></div></div></div>
<p>Usualmente los sistemas de ficheros se montan con el identificador único universal (UUID) como clave; esto permite montarlos adecuadamente a pesar de que el nombre del dispositivo cambie. Los identificadores UUID son largos y difíciles de leer, así que si prefiere, el instalador puede montar los sistemas de ficheros basado en los nombres tradicionales de los dispositivos o basado en una etiqueta asignada por usted. Si se especifica montaje por etiqueta, cualquier sistema de ficheros sin etiqueta se montará a partir del UUID. </p>
<p>Los dispositivos con nombres estables, tales como los volúmenes lógicos LVM continuarán usando sus nombres tradicionales en lugar de los UUID. </p>
<div class="warning"><table border="0" summary="Warning">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[Aviso]" src="images/warning.png"></td>
<th align="left">Aviso</th>
</tr>
<tr><td align="left" valign="top"><p>Los nombres de dispositivos tradicionales pueden cambiar basados en el orden en el cual el núcleo los descubra al momento del arranque, lo que puede causar un montaje erróneo de los sistemas de ficheros. De la misma forma, las etiquetas pueden se descoordinar si conecta un nuevo disco o unidad USB. De suceder esto, su sistema se comportará aleatoriamente al momento del arranque. </p></td></tr>
</table></div>
<div class="informalexample"><pre class="screen"># De forma predeterminada se montará por UUID, pero puede elegir 
# "traditional" para usar nombres de dispositivos tradicionales, o
# "label" para intentar con etiquetas de sistemas de ficheros antes
# de usar el identificador UUID.
#d-i partman/mount_style select uuid
</pre></div>
</div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-base-installer"></a>B.4.8. Configuración del sistema base</h3></div></div></div>
<p>No hay mucho que se pueda preconfigurar en esta etapa de la instalación. La única pregunta concerniente a la instalación se refiere al núcleo. </p>
<div class="informalexample"><pre class="screen"># Configure APT para que no instale paquetes recomendados por omisión.
# El uso de esta opción puede resultar en un sistema incompleto, y por ello
# sólo lo deberían usar usuarios experimentados.
#d-i base-installer/install-recommends boolean false

# El (meta) paquete de imagen de núcleo que instalar; se puede utilizar
# «none» si no se va a instalar ningún núcleo.
#d-i base-installer/kernel/image string linux-image-686
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-apt"></a>B.4.9. Configuración de APT</h3></div></div></div>
<p>Tanto la configuración de <code class="filename">/etc/apt/sources.list</code> como las opciones de configuraciones básicas se automatizan completamente de acuerdo al método de instalación y las respuestas a preguntas anteriores. De forma opcional, puede añadir otros repositorios (locales). </p>
<div class="informalexample"><pre class="screen"># You can choose to install non-free and contrib software.
#d-i apt-setup/non-free boolean true
#d-i apt-setup/contrib boolean true
# Uncomment this if you don't want to use a network mirror.
#d-i apt-setup/use_mirror boolean false
# Select which update services to use; define the mirrors to be used.
# Values shown below are the normal defaults.
#d-i apt-setup/services-select multiselect security, updates
#d-i apt-setup/security_host string security.debian.org

# Additional repositories, local[0-9] available
#d-i apt-setup/local0/repository string \
#       http://local.server/debian stable main
#d-i apt-setup/local0/comment string local server
# Enable deb-src lines
#d-i apt-setup/local0/source boolean true
# URL to the public key of the local repository; you must provide a key or
# apt will complain about the unauthenticated repository and so the
# sources.list line will be left commented out
#d-i apt-setup/local0/key string http://local.server/key

# By default the installer requires that repositories be authenticated
# using a known gpg key. This setting can be used to disable that
# authentication. Warning: Insecure, not recommended.
#d-i debian-installer/allow_unauthenticated boolean true

# Uncomment this to add multiarch configuration for i386
#d-i apt-setup/multiarch string i386

</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-pkgsel"></a>B.4.10. Selección de paquetes</h3></div></div></div>
<p>Puede elegir la instalación de cualquier combinación de las tareas que están disponibles. Las tareas disponibles en el momento de escribir estas líneas incluyen: </p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc">
<li class="listitem"><p><strong class="userinput"><code>standard</code></strong> (standard tools) </p></li>
<li class="listitem"><p><strong class="userinput"><code>desktop</code></strong> (graphical desktop) </p></li>
<li class="listitem"><p><strong class="userinput"><code>gnome-desktop</code></strong> (Gnome desktop) </p></li>
<li class="listitem"><p><strong class="userinput"><code>xfce-desktop</code></strong> (XFCE desktop) </p></li>
<li class="listitem"><p><strong class="userinput"><code>kde-desktop</code></strong> (KDE Plasma desktop) </p></li>
<li class="listitem"><p><strong class="userinput"><code>cinnamon-desktop</code></strong> (Cinnamon desktop) </p></li>
<li class="listitem"><p><strong class="userinput"><code>mate-desktop</code></strong> (MATE desktop) </p></li>
<li class="listitem"><p><strong class="userinput"><code>lxde-desktop</code></strong> (LXDE desktop) </p></li>
<li class="listitem"><p><strong class="userinput"><code>web-server</code></strong> (web server) </p></li>
<li class="listitem"><p><strong class="userinput"><code>print-server</code></strong> (print server) </p></li>
<li class="listitem"><p><strong class="userinput"><code>ssh-server</code></strong> (SSH server) </p></li>
</ul></div>
<p>También puede no seleccionar ninguna tarea y forzar la instalación de un conjunto de paquetes de alguna otra forma. Le recomendamos que siempre introduzca la tarea <strong class="userinput"><code>Sistema estándar</code></strong>. </p>
<p>Puede utilizar el parámetro <code class="classname">pkgsel/include</code> para instalar paquetes individuales además de los paquetes que las tareas instalan. Este parámetro toma valores que pueden estar separados por comas o por espacios, de forma que se puede utilizar fácilmente en la línea de órdenes del núcleo. </p>
<div class="informalexample"><pre class="screen">#tasksel tasksel/first multiselect standard, web-server, kde-desktop

# Paquetes individuales a instalar
#d-i pkgsel/include string openssh-server build-essential
# En caso de querer hacer actualización de paquetes después
# de debootstrap.
# Valores posibles: none, safe-upgrade, full-upgrade
#d-i pkgsel/upgrade select none

# Algunas versiones del instalador pueden informar de las versiones
# de programas que tiene instalados y los programas que utiliza.
# Por omisión, no se envía ningún informe, pero estos informes
# ayudan al proyecto a determinar qué programas son más populares
# y que se deben incluir en los CD
#popularity-contest popularity-contest/participate boolean false
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-bootloader"></a>B.4.11. Instalación del cargador de arranque</h3></div></div></div>
<div class="informalexample"><pre class="screen"><span class="phrase"># Grub is the default boot loader (for x86). If you want lilo installed
# instead, uncomment this:
#d-i grub-installer/skip boolean true
# To also skip installing lilo, and install no bootloader, uncomment this
# too:
#d-i lilo-installer/skip boolean true</span>


# This is fairly safe to set, it makes grub install automatically to the MBR
# if no other operating system is detected on the machine.
d-i grub-installer/only_debian boolean true

# This one makes grub-installer install to the MBR if it also finds some other
# OS, which is less safe as it might not be able to boot that other OS.
d-i grub-installer/with_other_os boolean true

# Due notably to potential USB sticks, the location of the MBR can not be
# determined safely in general, so this needs to be specified:
#d-i grub-installer/bootdev  string /dev/sda
# To install to the first device (assuming it is not a USB stick):
#d-i grub-installer/bootdev  string default

# Alternatively, if you want to install to a location other than the mbr,
# uncomment and edit these lines:
#d-i grub-installer/only_debian boolean false
#d-i grub-installer/with_other_os boolean false
#d-i grub-installer/bootdev  string (hd0,1)
# To install grub to multiple disks:
#d-i grub-installer/bootdev  string (hd0,1) (hd1,1) (hd2,1)

# Optional password for grub, either in clear text
#d-i grub-installer/password password r00tme
#d-i grub-installer/password-again password r00tme
# or encrypted using an MD5 hash, see grub-md5-crypt(8).
#d-i grub-installer/password-crypted password [MD5 hash]

# Use the following option to add additional boot parameters for the
# installed system (if supported by the bootloader installer).
# Note: options passed to the installer will be added automatically.
#d-i debian-installer/add-kernel-opts string nousb
</pre></div>
<p>Con la orden <span class="command"><strong>grub-md5-crypt</strong></span>, o con la orden del ejemplo en <a class="xref" href="apbs04.html#preseed-account" title="B.4.5. Configuración de cuentas de usuario">Sección B.4.5, “Configuración de cuentas de usuario”</a> se puede generar un hash MD5 de una clave para <code class="classname">grub</code>. </p>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-finish"></a>B.4.12. Finalizar la instalación</h3></div></div></div>
<div class="informalexample"><pre class="screen"># En instalaciones desde la consola serial, las consolas virtuales usuales
# (VT1-VT6) están deshabilitadas normalmente en «/etc/inittab». Descomente
# la siguiente línea para evitar este comportamiento:
#d-i finish-install/keep-consoles boolean true

# Omitir el mensaje final sobre la finalización de la instalación.
d-i finish-install/reboot_in_progress note

# Esta opción impedirá que el instalador expulse el CD durante
# el reinicio, y puede ser útil en algunas circunstancias:
#d-i cdrom-detect/eject boolean false

# Para hacer que el sistema se detenga cuando termine la instalación en
# lugar de reiniciar al sistema instalado:
#d-i debian-installer/exit/halt boolean true
# Para apagar la máquina en lugar de detenerla:
#d-i debian-installer/exit/poweroff boolean true
</pre></div>
</div>
<div class="sect2">
<div class="titlepage"><div><div><h3 class="title">
<a name="preseed-other"></a>B.4.13. Preconfiguración de otros paquetes</h3></div></div></div>
<div class="informalexample"><pre class="screen"># Dependiendo del software que elija instalar, o si las cosas no salen
# bien durante el proceso de instalación, es posible que se formulen
# otra preguntas. Por supuesto también puede preconfigurar éstas.
# Para obtener una lista de cada pregunta posible que podría llegar a ser
# formulada durante una instalación puede hacer una instalación y
# ejecutar estas órdenes:
#   debconf-get-selections --installer &gt; fichero
#   debconf-get-selections &gt;&gt; fichero
</pre></div>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div id="ftn.idm3647" class="footnote"><p><a href="#idm3647" class="para"><sup class="para">[23] </sup></a> Preconfigurar <code class="literal">locale</code> como <strong class="userinput"><code>en_NL</code></strong> resultaría, en <code class="literal">en_US.UTF-8</code> como la configuración regional por omisión en el sistema instalado. Si prefiere, por ejemplo. <code class="literal">en_GB.UTF-8</code>, tendrá que preconfigurar los valores de forma individual. </p></div>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="apbs03.html"><img src="images/prev.png" alt="Anterior"></a> </td>
<td width="20%" align="center"><a accesskey="u" href="apb.html"><img src="images/up.png" alt="Subir"></a></td>
<td width="40%" align="right"> <a accesskey="n" href="apbs05.html"><img src="images/next.png" alt="Siguiente"></a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">B.3. Crear un fichero de preconfiguración </td>
<td width="20%" align="center"><a accesskey="h" href="index.html"><img src="images/home.png" alt="Inicio"></a></td>
<td width="40%" align="right" valign="top"> B.5. Opciones avanzadas</td>
</tr>
</table>
</div>
</body>
</html>
